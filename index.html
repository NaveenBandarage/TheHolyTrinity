<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <title>The Holy Trinity</title>
    <meta name="description" content="The Holy Trinity">
    <meta name="author" content="Naveen Bandarage">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

    <!-- Open Graph -->
    <meta name="og:title" content="The Holy Trinity" />
    <meta name="og:url" content="https://timdeschryver.dev/posts/gridsome-social-cards" />
    <meta name="og:description" content="Tracks the three greatest currencies" />
    <meta name="og:type" content="article" />
    <meta name="og:image" content="" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@naveenbandarage" />
    <meta name="twitter:title" content="The Holy Trinity" />
    <meta name="twitter:description" content="Tracks the three greatest currencies" />
    <meta name="twitter:image" content="" />
</head>

<body>
    <div class="container">
        <div class="content">
            <div>
                <p class="text">The holy trinity of $BTC, $ETH, and $DOGE goes up: </p>
                <p class="number1 transparentBTC" id="number1">$4</p>
                <p class="number2 transparentETH" id="number2">$4</p>
                <p class="number3 transparentDOGE" id="number3">$4</p>
                <p class="text">Every Day</p>
            </div>
        </div>
        <footer>By <a class="handle" href="https://twitter.com/naveenbandarage"> @naveenbandarage</a> <span
                class="source">(<a href="https://github.com/NaveenBandarage/TheHolyTrinity">The plug.</a>)</span>
        </footer>
    </div>
    </div>
    <script>
                                                        function handleDGOGEData(data) {
                                                            const genesis = new Date(2009, 1, 3);
                                                            const now = new Date();
                                                            const deltaSeconds = now.getTime() - genesis.getTime();
                                                            const deltaDays = deltaSeconds / (1000 * 3600 * 24);
                                                            const nguDaily = data.ticker.price / deltaDays;
                                                            const el = document.getElementById("number3");
                                                            if (el) {
                                                                el.innerHTML = `\$${nguDaily.toFixed(2)}`;
                                                                el.classList.remove("transparentDOGE")
                                                            }

                                                        }
                                                        function handleETHData(data) {
                                                            const genesis = new Date(2009, 1, 3);
                                                            const now = new Date();
                                                            const deltaSeconds = now.getTime() - genesis.getTime();
                                                            const deltaDays = deltaSeconds / (1000 * 3600 * 24);
                                                            const nguDaily = data.ticker.price / deltaDays;
                                                            const el = document.getElementById("number2");
                                                            if (el) {
                                                                el.innerHTML = `\$${nguDaily.toFixed(2)}`;
                                                                el.classList.remove("transparentETH")
                                                            }

                                                        }
                                                        function handleBTCdata(data) {
                        const genesis = new Date(2009, 1, 3);
                        const now = new Date();
                        const deltaSeconds = now.getTime() - genesis.getTime();
                        const deltaDays = deltaSeconds / (1000 * 3600 * 24);
                        const nguDaily = data.ticker.price / deltaDays;
                                                        const el = document.getElementById("number1");
                        if (el) {
                            el.innerHTML = `\$${nguDaily.toFixed(2)}`;
                            el.classList.remove("transparentBTC")
                        }

                    }
                


        // TODO: error handling
                                                    fetch('https://api.cryptonator.com/api/ticker/doge-usd')
                                                        .then(response => response.json())
                                                        .then(data => handleDGOGEData(data));

                                                    fetch('https://api.cryptonator.com/api/ticker/eth-usd')
                                                        .then(response => response.json())
                                                        .then(data => handleETHData(data));

                                                       fetch('https://api.cryptonator.com/api/ticker/btc-usd')
                                                            .then(response => response.json())
                                                                            .then(data => handleBTCdata(data));
                                                                    

    </script>
</body>
</html>